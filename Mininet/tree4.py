#!/usr/bin/python

#Librerie API importate:
from mininet.net import Mininet
from mininet.node import Controller, RemoteController
from mininet.cli import CLI
from mininet.link import Intf
from mininet.log import setLogLevel, info
from mininet.link import Link, TCLink
import time

#Avvio tempo
info('Tempo iniziale')
start_time = time.time()
print("--- %s seconds ---" % (time.time() - start_time))
#Definisco la classe principale myNetwork
def myNetwork():
	net = Mininet(topo=None,build=False, link=TCLink)
#Aggiungo il Controller Remoto c0 
	info('*** Aggiungo controller\n')
	net.addController(name='c0',controller=RemoteController,ip='127.0.0.1',port=6633)
#Aggiungo gli switch
	info( '*** Aggiungo switch s1\n')
	s1 = net.addSwitch('s1')
        info( '*** Aggiungo switch s2\n')
  	s2 = net.addSwitch('s2')
	info( '*** Aggiungo switch s3\n')
	s3 = net.addSwitch('s3')
	info( '*** Aggiungo switch s4\n')
	s4 = net.addSwitch('s4')
        info( '*** Aggiungo switch s5\n')
	s5 = net.addSwitch('s5')
	info( '*** Aggiungo switch s6\n')
	s6 = net.addSwitch('s6')
	info( '*** Aggiungo switch s7\n')
	s7 = net.addSwitch('s7')
        info( '*** Aggiungo switch s8\n')
    	s8 = net.addSwitch('s8')
        info( '*** Aggiungo switch s9\n')
   	s9 = net.addSwitch('s9')
	info( '*** Aggiungo switch s10\n')
	s10 = net.addSwitch('s10')
	info( '*** Aggiungo switch s11\n')
	s11 = net.addSwitch('s11')
        info( '*** Aggiungo switch s12\n')
	s12 = net.addSwitch('s12')
	info( '*** Aggiungo switch s13\n')
	s13 = net.addSwitch('s13')
	info( '*** Aggiungo switch s14\n')
	s14 = net.addSwitch('s14')
	info( '*** Aggiungo switch s15\n')
	s15 = net.addSwitch('s15')
	info( '*** Aggiungo switch s16\n')
	s16 = net.addSwitch('s16')
        info( '*** Aggiungo switch s17\n')
	s17 = net.addSwitch('s17')
	info( '*** Aggiungo switch s18\n')
	s18 = net.addSwitch('s18')
	info( '*** Aggiungo switch s19\n')
	s19 = net.addSwitch('s19')
        info( '*** Aggiungo switch s20\n')
	s20 = net.addSwitch('s20')
	info( '*** Aggiungo switch s21\n')
	s21 = net.addSwitch('s21')
	info( '*** Aggiungo switch s22\n')
	s22 = net.addSwitch('s22')
        info( '*** Aggiungo switch s23\n')
  	s23 = net.addSwitch('s23')
        info( '*** Aggiungo switch s24\n')
 	s24 = net.addSwitch('s24')
	info( '*** Aggiungo switch s25\n')
	s25 = net.addSwitch('s25')
	info( '*** Aggiungo switch s26\n')
	s26 = net.addSwitch('s26')
        info( '*** Aggiungo switch s27\n')
	s27 = net.addSwitch('s27')
	info( '*** Aggiungo switch s28\n')
	s28 = net.addSwitch('s28')
	info( '*** Aggiungo switch s29\n')
	s29 = net.addSwitch('s29')
	info( '*** Aggiungo switch s30\n')
	s30 = net.addSwitch('s30')
	info( '*** Aggiungo switch s31\n')
	s31 = net.addSwitch('s31')
#Aggiungo gli host
	info('*** Aggiungo gli host\n')
	h1 = net.addHost('h1', ip='10.0.0.1')
	h2 = net.addHost('h2',ip='10.0.0.2')
	h3 = net.addHost('h3', ip='10.0.0.3')
	h4 = net.addHost('h4', ip='10.0.0.4')
	h5 = net.addHost('h5', ip='10.0.0.5')
	h6 = net.addHost('h6',ip='10.0.0.6')
	h7 = net.addHost('h7', ip='10.0.0.7')
	h8 = net.addHost('h8', ip='10.0.0.8')
	h9 = net.addHost('h9', ip='10.0.0.9')
	h10 = net.addHost('h10',ip='10.0.0.10')
	h11 = net.addHost('h11', ip='10.0.0.11')
	h12 = net.addHost('h12', ip='10.0.0.12')
	h13 = net.addHost('h13', ip='10.0.0.13')
	h14 = net.addHost('h14',ip='10.0.0.14')
	h15 = net.addHost('h15', ip='10.0.0.15')
	h16 = net.addHost('h16', ip='10.0.0.16')
	h17 = net.addHost('h17', ip='10.0.0.17')
	h18 = net.addHost('h18', ip='10.0.0.18')
	h19 = net.addHost('h19', ip='10.0.0.19')
	h20 = net.addHost('h20', ip='10.0.0.20')
	h21 = net.addHost('h21', ip='10.0.0.21')
	h22 = net.addHost('h22',ip='10.0.0.22')
	h23 = net.addHost('h23', ip='10.0.0.23')
	h24 = net.addHost('h24', ip='10.0.0.24')
	h25 = net.addHost('h25', ip='10.0.0.25')
	h26 = net.addHost('h26',ip='10.0.0.26')
	h27 = net.addHost('h27', ip='10.0.0.27')
	h28 = net.addHost('h28', ip='10.0.0.28')
	h29 = net.addHost('h29', ip='10.0.0.29')
	h30 = net.addHost('h30',ip='10.0.0.30')
	h31 = net.addHost('h31', ip='10.0.0.31')
	h32 = net.addHost('h32', ip='10.0.0.32')
	info('*** Aggiungo i collegamenti\n')
#Collegamenti tra gli host h1 h2 e lo switch s5
	net.addLink(h1, s5)
	net.addLink(h2, s5)
#Collegamenti tra gli host h3 h4 e lo switch s6
	net.addLink(h3, s6)
	net.addLink(h4, s6)
#Collegamenti tra gli host h5 h6 e lo switch s8
	net.addLink(h5, s8)
	net.addLink(h6, s8)
#Collegamenti tra gli host h7 h8 e lo switch s9
	net.addLink(h7, s9)
	net.addLink(h8, s9)
#Collegamenti tra gli host h9 h10 e lo switch s13
	net.addLink(h9, s13)
	net.addLink(h10, s13)
#Collegamenti tra gli host h11 h12 e lo switch s14
	net.addLink(h11, s14)
	net.addLink(h12, s14)
#Collegamenti tra gli host h13 h14 e lo switch s15
	net.addLink(h13, s15)
	net.addLink(h14, s15)
#Collegamenti tra gli host h15 h16 e lo switch s16
	net.addLink(h15, s16)
	net.addLink(h16, s16)
#Collegamenti tra gli host h17 h18 e lo switch s20
	net.addLink(h17, s20)
	net.addLink(h18, s20)
#Collegamenti tra gli host h19 h20 e lo switch s21
	net.addLink(h19, s21)
	net.addLink(h20, s21)
#Collegamenti tra gli host h21 h22 e lo switch s23
	net.addLink(h21, s23)
	net.addLink(h22, s23)
#Collegamenti tra gli host h23 h24 e lo switch s24
	net.addLink(h23, s24)
	net.addLink(h24, s24)
#Collegamenti tra gli host h25 h26 e lo switch s28
	net.addLink(h25, s28)
	net.addLink(h26, s28)
#Collegamenti tra gli host h27 h28 e lo switch s29
	net.addLink(h27, s29)
	net.addLink(h28, s29)
#Collegamenti tra gli host h29 h30 e lo switch s30
	net.addLink(h29, s30)
	net.addLink(h30, s30)
#Collegamenti tra gli host h31 h32 e lo switch s31
	net.addLink(h31, s31)
	net.addLink(h32, s31)
#Collegamenti tra gli switch
	net.addLink(s1, s2)
	net.addLink(s1, s17)
	net.addLink(s2, s3)
	net.addLink(s2, s10)
	net.addLink(s3, s4)
	net.addLink(s3, s7)
	net.addLink(s4, s5)
	net.addLink(s4, s6)
	net.addLink(s7, s8)
	net.addLink(s7, s9)
	net.addLink(s10, s11)
	net.addLink(s10, s12)
	net.addLink(s11, s13)
	net.addLink(s11, s14)
	net.addLink(s12, s15)
	net.addLink(s12, s16)
	net.addLink(s17, s18)
	net.addLink(s17, s25)
	net.addLink(s18, s19)
	net.addLink(s18, s22)
	net.addLink(s19, s20)
	net.addLink(s19, s21)
	net.addLink(s22, s23)
	net.addLink(s22, s24)
	net.addLink(s25, s26)
	net.addLink(s25, s27)
	net.addLink(s26, s28)
	net.addLink(s26, s29)
	net.addLink(s27, s30)
	net.addLink(s27, s31)
#Avvio rete
	info('*** Avvio rete\n')
	net.start()
	mid_time = time.time();
	print("--- %s seconds ---" % (mid_time - start_time))
	#info('*** Dumping host connections\n')
 	#dumpNodeConnections(net.hosts)
	info('*** Testing network connectivity\n')
	#net.pingAll()
	print h1.cmd('ping -c1 %s' % h2.IP())
	print h2.cmd('ping -c1 %s' % h3.IP())
	print h3.cmd('ping -c1 %s' % h4.IP())
	print h4.cmd('ping -c1 %s' % h5.IP())
	print h5.cmd('ping -c1 %s' % h6.IP())
	print h6.cmd('ping -c1 %s' % h7.IP())
	print h7.cmd('ping -c1 %s' % h8.IP())
	print h8.cmd('ping -c1 %s' % h9.IP())
	print h9.cmd('ping -c1 %s' % h10.IP())
	print h10.cmd('ping -c1 %s' % h11.IP())
	print h11.cmd('ping -c1 %s' % h12.IP())
	print h12.cmd('ping -c1 %s' % h13.IP())
	print h13.cmd('ping -c1 %s' % h14.IP())
	print h14.cmd('ping -c1 %s' % h15.IP())
	print h15.cmd('ping -c1 %s' % h16.IP())
	print h16.cmd('ping -c1 %s' % h17.IP())
	print h17.cmd('ping -c1 %s' % h18.IP())
	print h18.cmd('ping -c1 %s' % h19.IP())
	print h19.cmd('ping -c1 %s' % h20.IP())
	print h20.cmd('ping -c1 %s' % h21.IP())
	print h21.cmd('ping -c1 %s' % h22.IP())
	print h22.cmd('ping -c1 %s' % h23.IP())
	print h23.cmd('ping -c1 %s' % h24.IP())
	print h24.cmd('ping -c1 %s' % h25.IP())
	print h25.cmd('ping -c1 %s' % h26.IP())
	print h26.cmd('ping -c1 %s' % h27.IP())
	print h27.cmd('ping -c1 %s' % h28.IP())
	print h28.cmd('ping -c1 %s' % h29.IP())
	print h29.cmd('ping -c1 %s' % h30.IP())
	print h30.cmd('ping -c1 %s' % h31.IP())
	print h31.cmd('ping -c1 %s' % h32.IP())
	info('Tempo finale')
	end_time = time.time()
	print("--- %s seconds ---" % (end_time - start_time))
	net.stop()
#Definisco la main class
if __name__ == '__main__':
	setLogLevel('info')
	myNetwork()
